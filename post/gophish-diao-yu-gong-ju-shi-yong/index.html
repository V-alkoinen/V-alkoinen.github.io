<!DOCTYPE html>
<html>
        <head>
        <meta name="viewport" content="width=device-width,minimum-scale=1,maximum-scale=1,initial-scale=1,user-scalable=no" />
        <meta charset="utf-8">
        <title>gophish钓鱼工具使用 | 老白</title>
        <link rel="stylesheet" href="https://V-alkoinen.github.io/styles/main.css">
        <link rel="stylesheet" href="https://at.alicdn.com/t/font_1306644_jwtuc2zzbrd.css">
        <link href="https://cdn.bootcss.com/animate.css/3.7.2/animate.min.css" rel="stylesheet">
         <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
        <script src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js"></script>
         <script src="https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"></script>
         <script >hljs.initHighlightingOnLoad();</script>

    </head>
    <body>
              <header class="header mdui-m-b-5">      
            <div class="container  ">
                <div class="index-title animated fadeInDown mdui-text-center mdui-text-color-white mdui-m-b-2" style="animation-delay: 0.2s"><a href="https://V-alkoinen.github.io">老白</a></div>
                <div class="mdui-text-color-white animated fadeInDown mdui-text-center  mdui-m-b-3" style="animation-delay: 0.4s"></div>
           
            <nav id="nav" class="mdui-text-center animated fadeInDown" style="animation-delay: 0.6s">
                   
                            <li><a href="/">首页</a>
                                <span class="nav-style top"></span>
                                <span class="nav-style bottom"></span>
                                <span class="nav-style left"></span>
                                <span class="nav-style right"></span>
                                </li>
                    
                            <li><a href="/archives">归档</a>
                                <span class="nav-style top"></span>
                                <span class="nav-style bottom"></span>
                                <span class="nav-style left"></span>
                                <span class="nav-style right"></span>
                                </li>
                    
                            <li><a href="/tags">标签</a>
                                <span class="nav-style top"></span>
                                <span class="nav-style bottom"></span>
                                <span class="nav-style left"></span>
                                <span class="nav-style right"></span>
                                </li>
                    
                  </nav>
                </div>
        </header>
        <div class="mdui-container ">
                <div class="mdui-row">
                        <div class="mdui-col-md-8 mdui-col-offset-md-2 ">
                                <article class="mdui-p-a-2 post animated fadeIn" style="animation-delay: 0.8s;animation-duration: 2s">
                                    <div class="post-title  mdui-m-b-1">gophish钓鱼工具使用</div>
                                    <div class="mdui-typo-body-2 mdui-m-b-2" datetime="2021-07-02 16:15:09">2021-07-02 / 7 min read</div>
                                    <div class="mdui-m-b-2 mdui-typo post-neirong"><h1 id="一-准备工作">一、准备工作</h1>
<p>  <code>Gophish</code>是一个开源网络钓鱼工具包，特点是开箱即用，特别适合甲方用来对内部员工进行邮件钓鱼演练。<br>
  项目主页：<a href="https://getgophish.com/">https://getgophish.com/</a></p>
<h2 id="1-安装">1、安装</h2>
<p>  支持<code>Windows</code>/ <code>Mac</code>/<code>Linux</code>平台。下载对应系统版本<a href="https://github.com/gophish/gophish/releases/">https://github.com/gophish/gophish/releases/</a>的压缩包，运行二进制文件即可。</p>
<h2 id="2-docker">2、Docker</h2>
<p>  <a href="https://hub.docker.com/r/gophish/gophish/">https://hub.docker.com/r/gophish/gophish/</a></p>
<pre><code>docker run -d --name gophish -p 443:3333 -p 80:80 gophish/gophish
docker logs gophish #从容器日志中查看密码
</code></pre>
<h2 id="3-项目文档">3、项目文档</h2>
<p>  <a href="http://getgophish.com/documentation">http://getgophish.com/documentation</a></p>
<h2 id="4-免费ssl证书">4、免费SSL证书</h2>
<pre><code>cd /opt/gophish              # 你的gophish目录
sudo apt install certbot
sudo kill $(pidof gohpish)
sudo certbot certonly -d access.a.com --standalone
ln -s /etc/letsencrypt/live/access.a.com/privkey.pem  access.a.com.key
ln -s /etc/letsencrypt/live/access.a.com/fullchain.pem access.a.com.crt
</code></pre>
<h2 id="5-配置文件">5、配置文件</h2>
<pre><code># nano config.json

{
        &quot;admin_server&quot;: {
                &quot;listen_url&quot;: &quot;0.0.0.0:8088&quot;,     //修改默认端口   
                &quot;use_tls&quot;: true,
                &quot;cert_path&quot;: &quot;gophish_admin.crt&quot;,
                &quot;key_path&quot;: &quot;gophish_admin.key&quot;
        },
        &quot;phish_server&quot;: {
                &quot;listen_url&quot;: &quot;0.0.0.0:443&quot;,     //https开启443端口
                &quot;use_tls&quot;: true,
                &quot;cert_path&quot;: &quot;access.a.com.crt&quot;,  //修改证书
                &quot;key_path&quot;: &quot;access.a.com.key&quot;    //修改证书
        },
        &quot;db_name&quot;: &quot;sqlite3&quot;,                     //数据库支持MySQL
        &quot;db_path&quot;: &quot;gophish.db&quot;,
        &quot;migrations_prefix&quot;: &quot;db/db_&quot;,
        &quot;contact_address&quot;: &quot;&quot;,
        &quot;logging&quot;: {
                &quot;filename&quot;: &quot;/var/log/gophish/gophish.log&quot;,  //日志记录，需要先创建目录和文件，否则跑不起来
                &quot;level&quot;: &quot;&quot;
        }
}
</code></pre>
<h1 id="二-目标人群">二、目标人群</h1>
<p><img src="https://V-alkoinen.github.io/post-images/1644743102949.png" alt="" loading="lazy"><br>
  案例模板：后面邮件内容可以用到<code>{{FirstName}}</code>变量<br>
<img src="https://V-alkoinen.github.io/post-images/1644743166870.png" alt="" loading="lazy"></p>
<h1 id="三-邮件内容模板">三、邮件内容模板</h1>
<figure data-type="image" tabindex="1"><img src="https://V-alkoinen.github.io/post-images/1644743398689.png" alt="" loading="lazy"></figure>
<pre><code>&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;p&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;您的Twitter帐户：{{.FirstName}}&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&amp;nbsp;出现异常登陆&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;，请您立即修改ucenter帐户密码，否则账户将被禁止使用。&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&amp;nbsp;&lt;/p&gt;

&lt;p&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;修改密码地址：&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;a href=&quot;{{.URL}}&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;https://ucenter.test.com&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/a&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;

&lt;p&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;&lt;font style=&quot;vertical-align: inherit;&quot;&gt;{{.Tracker}}&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/font&gt;&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>  模板变量参考：</p>
<table>
<thead>
<tr>
<th style="text-align:center">Variable</th>
<th style="text-align:center">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><code>{{.RId}}</code></td>
<td style="text-align:center">The target’s unique ID</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.FirstName}}</code></td>
<td style="text-align:center">The target’s first name</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.LastName}}</code></td>
<td style="text-align:center">The target’s unique ID</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.Position}}</code></td>
<td style="text-align:center">The target’s position</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.Email}}</code></td>
<td style="text-align:center">The target’s email address</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.From}}</code></td>
<td style="text-align:center">The spoofed sender</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.TrackingURL}}</code></td>
<td style="text-align:center">The URL to the tracking handler</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.Tracker}}</code></td>
<td style="text-align:center">An alias for <code>&lt;img src=&quot;{{.TrackingURL}}&quot;/&gt;</code></td>
</tr>
<tr>
<td style="text-align:center"><code>{{.URL}}</code></td>
<td style="text-align:center">The phishing URL</td>
</tr>
<tr>
<td style="text-align:center"><code>{{.BaseURL}}</code></td>
<td style="text-align:center">The base URL with the path and rid parameter stripped. Useful for making links to static files.</td>
</tr>
</tbody>
</table>
<h1 id="四-登陆页面">四、登陆页面</h1>
<p>  如果目标网站使用了前端框架的话（例如vue）会导致克隆失败，页面无法显示，需要自己保存网站页面并修改HTML代码，VUE框架由于使用js来触发form动作，需要注释并自己添加from代码。</p>
<pre><code>&lt;form action=&quot;&quot; autocomplete=&quot;off&quot; class=&quot;ivu-form ivu-form-label-right&quot; enctype=&quot;application/x-www-form-urlencoded&quot; method=&quot;post&quot;&gt;
</code></pre>
<p>  示例代码：</p>
<pre><code>&lt;html&gt;
&lt;head&gt;
	&lt;title&gt;&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;form action=&quot;&quot; method=&quot;post&quot; name=&quot;form&quot;&gt;&lt;label&gt;用户名:&lt;/label&gt; &lt;input name=&quot;username&quot; type=&quot;text&quot; /&gt;&lt;br /&gt;
&lt;label&gt;密码:&lt;/label&gt; &lt;input name=&quot;password&quot; type=&quot;password&quot; /&gt;&lt;br /&gt;
&lt;input id=&quot;login&quot; name=&quot;login&quot; type=&quot;submit&quot; value=&quot;修改密码&quot; /&gt;&amp;nbsp;&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<figure data-type="image" tabindex="2"><img src="https://V-alkoinen.github.io/post-images/1644745231652.png" alt="" loading="lazy"></figure>
<h1 id="五-邮箱配置">五、邮箱配置</h1>
<p>  目标使用的是腾讯企业邮箱，我这里使用的是QQ域名邮箱，可以直接绕过反垃圾，注意QQ域名邮箱已经下线，目前只有已开通的域名才能使用，而且不能新增成员。<br>
<img src="https://V-alkoinen.github.io/post-images/1644745801295.png" alt="" loading="lazy"></p>
<h1 id="六-发送钓鱼邮件">六、发送钓鱼邮件</h1>
<p>  选择创建的模板，输入钓鱼域名URL，程序在每封邮件内容中插入<code>{{.URL}}</code>变量，并创建一个唯一的id，以便跟踪统计。<br>
<img src="https://V-alkoinen.github.io/post-images/1644747053708.png" alt="" loading="lazy"><br>
<img src="https://V-alkoinen.github.io/post-images/1644747092675.png" alt="" loading="lazy"><br>
  统计面板：<br>
<img src="https://V-alkoinen.github.io/post-images/1644747166260.png" alt="" loading="lazy"></p>
</div>
                                    <div class="mdui-divider mdui-m-b-2"></div>
                                    <div class="mdui-row-xs-2 post-fenye">
                                       
                                        <div class="mdui-col"> <div class="mdui-text-left"><a href="https://V-alkoinen.github.io/post/kioptrix-level-1/">Kioptrix: Level 1</a></div></div>
                                        

                                        
                                        <div class="mdui-col"><div class="mdui-text-right "><a href="https://V-alkoinen.github.io/post/passive-iast/">Passive IAST</a></div> </div>
                                       
                                      </div>
                                   
                                    <div class="mdui-divider mdui-m-t-2 mdui-m-b-2"></div>
                                    
                                     <script src="https://V-alkoinen.github.io/media/scripts/Valine.min.js"></script>
 <div class="comment"></div>

<script>
      new Valine({
            el: '.comment',



            path: window.location.pathname,
            pageSize: 30,
            avatar:'mm', 
       })
    </script> 
<script>
    if(window.location.hash){
        var checkExist = setInterval(function() {
           if ($(window.location.hash).length) {
              $('html, body').animate({scrollTop: $(window.location.hash).offset().top-90}, 1000);
              clearInterval(checkExist);
           }
        }, 100);
    }
</script>
                                </article>

                                    
                        </div>
                      </div>
    
                

              </div>
                    <footer class="footer mdui-m-t-5 mdui-text-center">
               <nav class="social-links">
                      <ul>
                      
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      
                           
                      </ul>
                    </nav>
                    <div class="copyright">
                      
                  </div>
                  
              </footer>
    </body>
</html>